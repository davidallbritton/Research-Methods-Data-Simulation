---
title: "Generating Data For Two By Two Between Subjects"
author: "David Allbritton"
date: "2024-12-14"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Generating Data for a 2x2 fully randomized (between subjects) factorial design

First, let's see what gpt4o comes up with for us:

```{r}
# Load required library
#      set.seed(123) # For reproducibility

# Define parameters
n <- 20 # Number of subjects per condition
effect_A <- 0.5 # Effect size for factor A
effect_B <- 0.1 # Effect size for factor B
effect_AB <- 0.5 # Effect size for interaction A*B
sd_error <- 1 # Standard deviation of the error term

# Create a 2x2 factorial design
factor_levels <- expand.grid(A = c("A1", "A2"), B = c("B1", "B2"))
factor_levels <- factor_levels[rep(1:nrow(factor_levels), each = n), ]
factor_levels$Subject <- 1:nrow(factor_levels)

# Generate data
factor_levels$DV <- with(factor_levels, {
  mu <- 0 # Baseline mean
  mu <- mu + (A == "A2") * effect_A      # Add effect of A
  mu <- mu + (B == "B2") * effect_B      # Add effect of B
  mu <- mu + (A == "A2" & B == "B2") * effect_AB # Add interaction
  rnorm(nrow(factor_levels), mean = mu, sd = sd_error) # Add Gaussian noise
})

# Convert factors to factor type
factor_levels$A <- factor(factor_levels$A)
factor_levels$B <- factor(factor_levels$B)

# Save to a data frame for further use
simulated_data <- factor_levels

```

Add a column of Likert scale ratings (1-7) that could result from the 
underlying gaussian dv being measured categorically:

```{r}
# Add a categorical column to the dataset based on evenly spaced intervals
simulated_data$DV_likert7 <- cut(simulated_data$DV, 
                                     breaks = seq(min(simulated_data$DV), 
                                                  max(simulated_data$DV), 
                                                  length.out = 8), 
                                     labels = 1:7, 
                                     include.lowest = TRUE)
# make it numeric rather than a factor
simulated_data$DV_likert7 <- as.numeric(as.character(simulated_data$DV_likert7))
```

Add another column translating it to a 1-5 Likert scale:

```{r}
# Add a categorical column to the dataset based on evenly spaced intervals
simulated_data$DV_likert5 <- cut(simulated_data$DV, 
                                     breaks = seq(min(simulated_data$DV), 
                                                  max(simulated_data$DV), 
                                                  length.out = 6), 
                                     labels = 1:5, 
                                     include.lowest = TRUE)
# make it numeric rather than a factor
simulated_data$DV_likert5 <- as.numeric(as.character(simulated_data$DV_likert5))

# View the updated dataset
head(simulated_data)
```

Check the cell means of each version of the DV to make sure it looks right:

```{r}
# Load dplyr
library(dplyr)

# Calculate cell means and standard deviations for the original gaussian DV
cell_stats <- simulated_data %>%
  group_by(A, B) %>%
  summarize(
    Mean = mean(DV),
    SD = sd(DV),
    .groups = "drop"
  )
# Display the results
print(cell_stats)

# Calculate cell means and standard deviations for the 1-7 likert scale DV
cell_stats7 <- simulated_data %>%
  group_by(A, B) %>%
  summarize(
    Mean = mean(DV_likert7),
    SD = sd(DV_likert7),
    .groups = "drop"
  )
# Display the results
print(cell_stats7)

# Calculate cell means and standard deviations for the 1-5 likert scale DV
cell_stats5 <- simulated_data %>%
  group_by(A, B) %>%
  summarize(
    Mean = mean(DV_likert5),
    SD = sd(DV_likert5),
    .groups = "drop"
  )
# Display the results
print(cell_stats5)

```


Great, now let's analyze it, first using the underlying gaussian DV:

```{r}
# Run the ANOVA
anova_result <- aov(DV ~ A * B, data = simulated_data)

# Summarize the results
summary(anova_result)

```

Then do the same analysis using the categorical 1-7 rating scale version of the DV:

```{r}
# Run the ANOVA
anova_result7 <- aov(DV_likert7 ~ A * B, data = simulated_data)

# Summarize the results
summary(anova_result7)

```

Then do the same analysis using the categorical 1-5 rating scale version of the DV:

```{r}
# Run the ANOVA
anova_result5 <- aov(DV_likert5 ~ A * B, data = simulated_data)

# Summarize the results
summary(anova_result5)

```